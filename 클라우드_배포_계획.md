# 재고관리시스템 클라우드 배포 계획

## 📋 개요
현재 로컬에서 실행 중인 재고관리시스템을 클라우드에 배포하여 여러 사용자가 동시에 접속하고 데이터를 공유할 수 있도록 구축

## 🎯 목표
- 어디서든 웹 브라우저로 접속 가능
- 여러 사용자 동시 작업 지원
- 데이터 실시간 동기화
- 안정적인 데이터 백업

---

## 📊 1단계: 데이터베이스 마이그레이션

### 1.1 PostgreSQL 선택 (무료 옵션)
**서비스: ElephantSQL (무료 플랜)**
- 무료 20MB 제공 (소규모 재고관리에 충분)
- 가입 및 데이터베이스 인스턴스 생성
- Connection URL 획득

### 1.2 코드 수정 사항
```python
# database.py 수정
import psycopg2  # PostgreSQL 드라이버
from urllib.parse import urlparse

DATABASE_URL = "postgresql://user:password@server/database"  # ElephantSQL에서 제공

def get_connection():
    return psycopg2.connect(DATABASE_URL)
```

### 1.3 SQLite → PostgreSQL 데이터 이전
- 기존 SQLite 데이터를 CSV로 내보내기
- PostgreSQL에 테이블 생성
- CSV 데이터 임포트

---

## 🚀 2단계: 웹 서버 호스팅

### 2.1 Render.com 선택 (무료 옵션)
**장점:**
- 무료 플랜 제공
- PostgreSQL 데이터베이스 무료 제공 (90일, 연장 가능)
- 자동 HTTPS 지원
- GitHub 연동 자동 배포

### 2.2 배포 준비
1. **requirements.txt 업데이트**
```
Flask==2.3.2
psycopg2-binary==2.9.9
gunicorn==21.2.0  # 프로덕션 서버
python-dotenv==1.0.0  # 환경변수 관리
```

2. **환경변수 파일 (.env)**
```
DATABASE_URL=postgresql://...
SECRET_KEY=your-secret-key
FLASK_ENV=production
```

3. **Procfile 생성** (Render 실행 명령)
```
web: gunicorn app:app
```

### 2.3 보안 설정
- 환경변수로 민감한 정보 관리
- HTTPS 강제 적용
- SQL Injection 방지 (파라미터 바인딩 사용 중)
- CORS 설정 (필요시)

---

## 👥 3단계: 다중 사용자 지원

### 3.1 사용자 인증 시스템 추가
```python
# Flask-Login 사용
- 사용자 테이블 추가
- 로그인/로그아웃 기능
- 세션 관리
- 권한 관리 (관리자/일반 사용자)
```

### 3.2 동시성 처리
- 데이터베이스 트랜잭션 관리
- 낙관적 잠금 (Optimistic Locking) 구현
- 충돌 감지 및 해결

### 3.3 실시간 업데이트 (선택사항)
- WebSocket (Flask-SocketIO) 추가
- 다른 사용자의 변경사항 실시간 반영

---

## 📝 4단계: 배포 프로세스

### 4.1 GitHub 저장소 설정
1. `.gitignore` 파일 생성
```
*.pyc
__pycache__/
inventory.db
.env
venv/
```

2. GitHub에 Push
```bash
git remote add origin https://github.com/username/inventory-system.git
git push -u origin master
```

### 4.2 Render 배포
1. Render.com 가입
2. New Web Service 생성
3. GitHub 저장소 연결
4. 환경변수 설정
5. 자동 배포 활성화

### 4.3 데이터베이스 연결
1. Render PostgreSQL 인스턴스 생성
2. Connection String 복사
3. 웹 서비스 환경변수에 추가

---

## 🔧 5단계: 추가 개선사항

### 5.1 성능 최적화
- 데이터베이스 인덱스 추가
- 캐싱 구현 (Redis)
- 페이지네이션 개선
- 이미지 최적화 (CDN 사용)

### 5.2 백업 전략
- 일일 자동 백업 스크립트
- S3 또는 Google Cloud Storage 연동
- 백업 복원 테스트

### 5.3 모니터링
- 에러 트래킹 (Sentry)
- 성능 모니터링 (New Relic)
- 사용자 분석 (Google Analytics)

---

## 💰 예상 비용

### 무료 옵션
- **Render.com**: 무료 (제한적)
- **ElephantSQL**: 무료 20MB
- **총 비용**: $0/월

### 유료 옵션 (추천)
- **Render.com Starter**: $7/월
- **PostgreSQL**: $7/월
- **총 비용**: 약 $14/월 (약 20,000원)

---

## 📅 구현 일정

| 단계 | 작업 내용 | 예상 시간 |
|------|----------|-----------|
| 1 | 데이터베이스 마이그레이션 | 2-3시간 |
| 2 | 코드 수정 (PostgreSQL 지원) | 1-2시간 |
| 3 | 사용자 인증 시스템 | 3-4시간 |
| 4 | Render 배포 설정 | 1-2시간 |
| 5 | 테스트 및 디버깅 | 2-3시간 |
| **총계** | | **9-14시간** |

---

## ⚠️ 주의사항

1. **데이터 마이그레이션**
   - 반드시 백업 후 진행
   - 테스트 환경에서 먼저 확인

2. **보안**
   - 모든 환경변수는 .env 파일로 관리
   - 절대 GitHub에 비밀번호 커밋 금지

3. **비용 관리**
   - 무료 플랜 제한 확인
   - 트래픽 모니터링

4. **다운타임**
   - 배포 시 잠시 서비스 중단 가능
   - 사용자에게 사전 공지

---

## 🎉 완료 후 장점

✅ 언제 어디서나 접속 가능  
✅ 여러 직원 동시 사용  
✅ 자동 백업  
✅ 실시간 데이터 동기화  
✅ 모바일 기기 지원  
✅ 보안 강화 (HTTPS)  
✅ 확장 가능한 구조  

---

## 📚 참고 자료

- [Render 공식 문서](https://render.com/docs)
- [ElephantSQL 가이드](https://www.elephantsql.com/docs/)
- [Flask 프로덕션 배포](https://flask.palletsprojects.com/en/2.3.x/deploying/)
- [PostgreSQL Python 드라이버](https://www.psycopg.org/docs/)